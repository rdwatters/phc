{{define "main"}}
    <div class="reveal">
        <div class="slides">
            <!-- Opening page -->
            <section>
            {{$authorbyline := .Site.Params.authorbyline}}
                <h1>{{.Site.Title | markdownify}}</h1>
                {{with .Site.Params.presentationsubtitle}}
                <h2 class="presentation-subtitle">{{.}}</h2>
                {{end}}
                {{ with .Site.Params.siteurl }}
                <p><a href="{{.}}"><code>{{.}}</code></a></p>
                {{ end }}
                <ol class="homepage">
                {{ range $.Site.Params.sections }}
                {{ with $.Site.GetPage "section" . }}<li>{{.Title}}</li>{{end}}
                {{ end }}
                </ol>
                {{with .Site.Params.presentationdate}}
                    <br><br><time>{{dateFormat "January 2, 2006" . }}</time><span class="author-byline">{{$authorbyline}}</span>
                {{end}}
            </section>
            <!-- previously just... -->
            <!-- range .Site.Pages.GroupBy "Section"-->
                <section>
                    {{ range where .Site.Pages "Section" "one" }}
                        {{- if eq .Kind "section" -}}
                        <section>
                            <h2 class="objective-title">{{.Title | markdownify }}</h2>
                            {{ with .Params.subtitle }}
                            <h3 class="objective-subtitle">{{ . | markdownify }}</h3>
                            {{ end }}
                        </section>
                        {{else}}
                        <section>
                            <h2>{{.Title | markdownify}}</h2>
                            {{with .Params.subtitle}}<h3 class="fragment slide-subtitle">{{. | markdownify}}</h3>{{end}}
                            <div class="content">
                            {{.Content}}
                            </div>
                        </section>
                        {{ end }}
                    {{ end }}
                </section>
                <section>
                    {{ range where .Site.Pages "Section" "two" }}
                        {{- if eq .Kind "section" -}}
                        <section>
                            <h2 class="objective-title">{{.Title | markdownify }}</h2>
                            {{ with .Params.subtitle }}
                            <h3 class="objective-subtitle">{{ . | markdownify }}</h3>
                            {{ end }}
                        </section>
                        {{else}}
                        <section>
                            <h2>{{.Title | markdownify}}</h2>
                            {{with .Params.subtitle}}<h3 class="fragment slide-subtitle">{{. | markdownify}}</h3>{{end}}
                            <div class="content">
                            {{.Content}}
                            </div>
                        </section>
                        {{ end }}
                    {{ end }}
                </section>
                <section>
                    {{ range where .Site.Pages "Section" "three" }}
                        {{- if eq .Kind "section" -}}
                        <section>
                            <h2 class="objective-title">{{.Title | markdownify }}</h2>
                            {{ with .Params.subtitle }}
                            <h3 class="objective-subtitle">{{ . | markdownify }}</h3>
                            {{ end }}
                        </section>
                        {{else}}
                        <section>
                            <h2>{{.Title | markdownify}}</h2>
                            {{with .Params.subtitle}}<h3 class="fragment slide-subtitle">{{. | markdownify}}</h3>{{end}}
                            <div class="content">
                            {{.Content}}
                            </div>
                        </section>
                        {{ end }}
                    {{ end }}
                </section>
        </div>
    </div>
{{end}}
